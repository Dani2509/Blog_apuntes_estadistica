{
  "hash": "d090cf10a8d2b03f74af62b50282e12c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Descarga de datos del GBIF\"\ndescription: \"Descargando datos\"\nauthor: \"Daniela O\"\ncategories: [SIG, R]\ndate: 2024-09-17\ntoc-expand: true\n---\n\n\nDescargando datos\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(rgbif)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# descargando datos\n\n# Instalar y cargar la librería rgbif si no está instalada\nif(!require(rgbif)) {\n  install.packages(\"rgbif\")\n}\nlibrary(rgbif)\n\n# Parámetros de búsqueda\ntaxon_key <- name_backbone(name=\"Mammalia\")$usageKey # Buscar el código del taxón Mammalia\ncountry_code <- \"CO\" # Código ISO para Colombia\ndepartment <- \"Magdalena\" # Departamento Magdalena\n\n# Realizar la búsqueda de datos\nocc_data <- occ_search(\n  taxonKey = taxon_key, \n  country = country_code, \n  stateProvince = department, \n  hasCoordinate = TRUE,  # Filtrar solo registros con coordenadas\n  limit = 1000 # Límite de registros\n)\n\n# Ver los primeros resultados\nhead(occ_data$data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 147\n  key        scientificName   decimalLatitude decimalLongitude issues datasetKey\n  <chr>      <chr>                      <dbl>            <dbl> <chr>  <chr>     \n1 4510334177 Dasyprocta punc…            11.1            -74.1 cdc,c… 50c9509d-…\n2 4936855480 Saguinus oedipu…            11.3            -74.2 cdc,c… 50c9509d-…\n3 4512238973 Cebus malitiosu…            11.2            -74.0 cdc,c… 50c9509d-…\n4 4516701288 Alouatta senicu…            11.1            -74.1 cdc,c… 50c9509d-…\n5 4516613051 Alouatta senicu…            11.3            -73.9 cdc,c… 50c9509d-…\n6 4516840799 Cerdocyon thous…            11.3            -73.9 cdc    50c9509d-…\n# ℹ 141 more variables: publishingOrgKey <chr>, installationKey <chr>,\n#   hostingOrganizationKey <chr>, publishingCountry <chr>, protocol <chr>,\n#   lastCrawled <chr>, lastParsed <chr>, crawlId <int>, basisOfRecord <chr>,\n#   occurrenceStatus <chr>, lifeStage <chr>, taxonKey <int>, kingdomKey <int>,\n#   phylumKey <int>, classKey <int>, orderKey <int>, familyKey <int>,\n#   genusKey <int>, speciesKey <int>, acceptedTaxonKey <int>,\n#   acceptedScientificName <chr>, kingdom <chr>, phylum <chr>, order <chr>, …\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nocc<- data.frame(occ_data$data)\n# view(occ)\n\nocc_depu<- occ |> select(-c(5,7,8,9,10,11,12,13,14,17,18,19,20,21,22,23,24,25,26,34,35,39,43:147))\n\nglimpse(occ_depu)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1,000\nColumns: 20\n$ key                    <chr> \"4510334177\", \"4936855480\", \"4512238973\", \"4516…\n$ scientificName         <chr> \"Dasyprocta punctata Gray, 1842\", \"Saguinus oed…\n$ decimalLatitude        <dbl> 11.14510, 11.25700, 11.23540, 11.09190, 11.2894…\n$ decimalLongitude       <dbl> -74.11477, -74.16946, -73.95590, -74.07312, -73…\n$ datasetKey             <chr> \"50c9509d-22c7-4a22-a47d-8c48425ef4a7\", \"50c950…\n$ basisOfRecord          <chr> \"HUMAN_OBSERVATION\", \"HUMAN_OBSERVATION\", \"HUMA…\n$ occurrenceStatus       <chr> \"PRESENT\", \"PRESENT\", \"PRESENT\", \"PRESENT\", \"PR…\n$ acceptedScientificName <chr> \"Dasyprocta punctata Gray, 1842\", \"Saguinus oed…\n$ kingdom                <chr> \"Animalia\", \"Animalia\", \"Animalia\", \"Animalia\",…\n$ phylum                 <chr> \"Chordata\", \"Chordata\", \"Chordata\", \"Chordata\",…\n$ order                  <chr> \"Rodentia\", \"Primates\", \"Primates\", \"Primates\",…\n$ family                 <chr> \"Dasyproctidae\", \"Callitrichidae\", \"Cebidae\", \"…\n$ genus                  <chr> \"Dasyprocta\", \"Saguinus\", \"Cebus\", \"Alouatta\", …\n$ species                <chr> \"Dasyprocta punctata\", \"Saguinus oedipus\", \"Ceb…\n$ taxonRank              <chr> \"SPECIES\", \"SPECIES\", \"SPECIES\", \"SPECIES\", \"SP…\n$ taxonomicStatus        <chr> \"ACCEPTED\", \"ACCEPTED\", \"ACCEPTED\", \"ACCEPTED\",…\n$ iucnRedListCategory    <chr> \"LC\", \"CR\", \"EN\", \"LC\", \"LC\", \"LC\", \"LC\", \"EN\",…\n$ continent              <chr> \"SOUTH_AMERICA\", \"SOUTH_AMERICA\", \"SOUTH_AMERIC…\n$ stateProvince          <chr> \"Magdalena\", \"Magdalena\", \"Magdalena\", \"Magdale…\n$ year                   <int> 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024,…\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# write.csv2(occ_depu, \"obs_mamigeros.csv\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# datos de herpetos \nif(!require(rgbif)) {\n  install.packages(\"rgbif\")\n}\nlibrary(rgbif)\n\n# Parámetros de búsqueda\ntaxon_key <- name_backbone(name=\"Reptilia\")$usageKey # Buscar el código del taxón Mammalia\ncountry_code <- \"CO\" # Código ISO para Colombia\ndepartment <- \"Magdalena\" # Departamento Magdalena\n\n# Realizar la búsqueda de datos\nocc_data <- occ_search(\n  taxonKey = taxon_key, \n  country = country_code, \n  stateProvince = department, \n  hasCoordinate = TRUE,  # Filtrar solo registros con coordenadas\n  limit = 2000 # Límite de registros\n)\n\n# Ver los primeros resultados\nhead(occ_data$data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 101\n  key        scientificName   decimalLatitude decimalLongitude issues datasetKey\n  <chr>      <chr>                      <dbl>            <dbl> <chr>  <chr>     \n1 4507796310 Anolis auratus …            11.2            -74.1 cdc,c… 50c9509d-…\n2 4510128617 Tretioscincus b…            11.3            -74.0 cdc,c… 50c9509d-…\n3 4510334177 Dasyprocta punc…            11.1            -74.1 cdc,c… 50c9509d-…\n4 4510151452 Vanellus chilen…            11.2            -74.2 cdc,c… 50c9509d-…\n5 4510413766 Atractus sancta…            11.1            -74.1 cdc,c… 50c9509d-…\n6 4510187739 Mastigodryas bo…            11.1            -74.1 cdc,c… 50c9509d-…\n# ℹ 95 more variables: publishingOrgKey <chr>, installationKey <chr>,\n#   hostingOrganizationKey <chr>, publishingCountry <chr>, protocol <chr>,\n#   lastCrawled <chr>, lastParsed <chr>, crawlId <int>, basisOfRecord <chr>,\n#   occurrenceStatus <chr>, taxonKey <int>, kingdomKey <int>, phylumKey <int>,\n#   classKey <int>, familyKey <int>, genusKey <int>, speciesKey <int>,\n#   acceptedTaxonKey <int>, acceptedScientificName <chr>, kingdom <chr>,\n#   phylum <chr>, family <chr>, genus <chr>, species <chr>, …\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nocc_reptilia<- data.frame(occ_data$data)\n#view(occ_reptilia)\n\nocc_depu_r<- occ_reptilia |> select(-c(7,8,9,10:13,14,17:24,36:58,60:101))\n\nglimpse(occ_depu_r)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 2,000\nColumns: 20\n$ key                    <chr> \"4507796310\", \"4510128617\", \"4510334177\", \"4510…\n$ scientificName         <chr> \"Anolis auratus Daudin, 1802\", \"Tretioscincus b…\n$ decimalLatitude        <dbl> 11.23691, 11.32014, 11.14510, 11.22588, 11.1014…\n$ decimalLongitude       <dbl> -74.14756, -73.95403, -74.11477, -74.18608, -74…\n$ issues                 <chr> \"cdc,cdround\", \"cdc,cdround\", \"cdc,cdround\", \"c…\n$ datasetKey             <chr> \"50c9509d-22c7-4a22-a47d-8c48425ef4a7\", \"50c950…\n$ basisOfRecord          <chr> \"HUMAN_OBSERVATION\", \"HUMAN_OBSERVATION\", \"HUMA…\n$ occurrenceStatus       <chr> \"PRESENT\", \"PRESENT\", \"PRESENT\", \"PRESENT\", \"PR…\n$ acceptedScientificName <chr> \"Anolis auratus Daudin, 1802\", \"Tretioscincus b…\n$ kingdom                <chr> \"Animalia\", \"Animalia\", \"Animalia\", \"Animalia\",…\n$ phylum                 <chr> \"Chordata\", \"Chordata\", \"Chordata\", \"Chordata\",…\n$ family                 <chr> \"Dactyloidae\", \"Gymnophthalmidae\", \"Dasyproctid…\n$ genus                  <chr> \"Anolis\", \"Tretioscincus\", \"Dasyprocta\", \"Vanel…\n$ species                <chr> \"Anolis auratus\", \"Tretioscincus bifasciatus\", …\n$ genericName            <chr> \"Anolis\", \"Tretioscincus\", \"Dasyprocta\", \"Vanel…\n$ specificEpithet        <chr> \"auratus\", \"bifasciatus\", \"punctata\", \"chilensi…\n$ taxonRank              <chr> \"SPECIES\", \"SPECIES\", \"SPECIES\", \"SPECIES\", \"SP…\n$ taxonomicStatus        <chr> \"ACCEPTED\", \"ACCEPTED\", \"ACCEPTED\", \"ACCEPTED\",…\n$ iucnRedListCategory    <chr> \"LC\", \"LC\", \"LC\", \"LC\", \"LC\", NA, \"LC\", \"LC\", N…\n$ class                  <chr> \"Squamata\", \"Squamata\", \"Mammalia\", \"Aves\", \"Sq…\n```\n\n\n:::\n\n```{.r .cell-code}\nocc_depu_r$class <- as.factor(occ_depu_r$class)\n\n# Ver los niveles de la variable categórica \"class\"\nnombres_categorias <- levels(occ_depu_r$class)\nprint(nombres_categorias)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Amphibia\"       \"Aves\"           \"Crocodylia\"     \"Elasmobranchii\"\n[5] \"Mammalia\"       \"Squamata\"       \"Testudines\"    \n```\n\n\n:::\n\n```{.r .cell-code}\nocc_r <- occ_depu_r |> filter(class == c(\"Amphibia\", \"Mammalia\" , \"Squamata\"))\n\n# view(occ_r)\n\n# write.csv2(occ_r, \"obs_reptilia.csv\")\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}