{
  "hash": "f92796e89e188f9dbc75d2bb29dbdad3",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Generalidades del paquete Terra\"\ndescription: \"Consideraciones de la library(terra) \"\nauthor: \"Daniela O\"\ncategories: [SIG, R, Terra, Map]\ndate: 2025-01-25\ntoc-expand: true\neditor_options: \n  chunk_output_type: console\n---\n\n\n\n\n\nEl paquete geodata permite descargar shapes de diferentes paises.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# install.packages(\"geodata\")\nlibrary(geodata)\n# install.packages(\"terra\")\nlibrary(terra)\n\n# para encontrar el shape de un pais por codigo\n# country_codes() \n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# iniciamos la busquedad del shape del pais\n\n# col_0 <- gadm(\"colombia\", level = 0, version = \"latest\", resolution = 2, path = getwd())\n\n# plot(col_0)\n```\n:::\n\n\n\n\n\nEn `path` se selecciona la ruta en donde queremos guardar el shape. En `resolution 2` es baja mientrras que `resolution 1` es alta\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#install.packages(\"sf\")\nlibrary(sf)\n#col_sf <- st_as_sf(col_0)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Guardar con opcion de sf\nwrite_sf(col_sf, \"posts/Paquete_Terra/Colombia_LO.shp\")\n\n# Guardar con opcion de terra\nwriteVector(col_sf, \"posts/Paquete_Terra/Colombia_LO.shp\")\n```\n:::\n\n\n\n\n\nAhora podemos visualizar el shape con el parquete `sf` o `terra`\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nshp1 <- sf::read_sf(\"COL_adm1.shp\") #<1>\nshp2 <- terra::vect(\"COL_adm1.shp\")\n```\n:::\n\n\n\n\n\n1.  Se genera un shape con una tabla de atributos\n\nPara graficar empleamos el comando `plot()` pero este te gr치fica un mapa por cada columna que tenga el shape. Entonces para eso especificamos la columna que queremos\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# especificando la columna\nplot(shp1[,4]) # <1>\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\n\n\n1.  para el gr치fico con sf tienes que especificar el numero de columna mientras que con terra si puedes a침adir el nombre de la columna\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(shp2, \"NAME_1\") # shape abierto con terra\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n\n\n## Manipulaci칩n de vectores 游때\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n\n# opci칩n 1 \narauca<- filter(shp1, NAME_1 == \"Arauca\")\nplot(arauca[,1])\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# opci칩n 2: funciona muy bien para los otros dos tipos\n\nBoyaca <- subset(shp2, shp2$NAME_1 == \"Boyac치\")\nplot(Boyaca)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\n\n\n### Verificar sistemas de coordenadas de referencias\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncrs(shp2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"GEOGCRS[\\\"WGS 84\\\",\\n    DATUM[\\\"World Geodetic System 1984\\\",\\n        ELLIPSOID[\\\"WGS 84\\\",6378137,298.257223563,\\n            LENGTHUNIT[\\\"metre\\\",1]]],\\n    PRIMEM[\\\"Greenwich\\\",0,\\n        ANGLEUNIT[\\\"degree\\\",0.0174532925199433]],\\n    CS[ellipsoidal,2],\\n        AXIS[\\\"geodetic latitude (Lat)\\\",north,\\n            ORDER[1],\\n            ANGLEUNIT[\\\"degree\\\",0.0174532925199433]],\\n        AXIS[\\\"geodetic longitude (Lon)\\\",east,\\n            ORDER[2],\\n            ANGLEUNIT[\\\"degree\\\",0.0174532925199433]],\\n    ID[\\\"EPSG\\\",4326]]\"\n```\n\n\n:::\n\n```{.r .cell-code}\nshp2 # Tambi칠n la coordenada se puede consultar con esta funci칩n \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n class       : SpatVector \n geometry    : polygons \n dimensions  : 32, 9  (geometries, attributes)\n extent      : -81.84153, -66.87033, -4.228429, 15.91247  (xmin, xmax, ymin, ymax)\n source      : COL_adm1.shp\n coord. ref. : lon/lat WGS 84 (EPSG:4326) \n names       :  ID_0   ISO   NAME_0  ID_1    NAME_1       TYPE_1   ENGTYPE_1\n type        : <num> <chr>    <chr> <num>     <chr>        <chr>       <chr>\n values      :    53   COL Colombia     1  Amazonas    Comisar칤a Commissiary\n                  53   COL Colombia     2 Antioquia Departamento  Department\n                  53   COL Colombia     3    Arauca  Intendencia  Intendancy\n NL_NAME_1 VARNAME_1\n     <chr>     <chr>\n        NA        NA\n        NA        NA\n        NA        NA\n```\n\n\n:::\n:::\n\n\n\n\n\n### Reproyectar sistema con paquete terra y sf\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nshp1.b <- sf::st_transform(shp1, crs = 32618)\n\nshp2.b <- terra::project(shp2, \"+proj=utm +zone=18 +ellps=clrk66 +units=m +no_defs +type=crs\" )\n```\n:::\n\n\n\n\n\n::: callout-note\nEn terra el sistema de coordenada debe especificarse como `Proj4,` mientras que sf es con EPSG 游녜勇끂n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}